/**
* Html5 Placeholder Polyfill - v2.0.7 - 2013-06-08
* @requires jQuery - tested with 1.6.2 but might as well work with older versions
* 
* current code: https://github.com/ericrglass/HTML5-placeholder-polyfill.git
* 
* original code: https://github.com/ginader/HTML5-placeholder-polyfill
* please report issues at: https://github.com/ginader/HTML5-placeholder-polyfill/issues
*
* Copyright (c) 2012 Dirk Ginader (ginader.de)
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
* 
*/

(function(e){function n(e,t){if(e.val()===""){e.data("placeholder").removeClass(t.hideClass)}else{e.data("placeholder").addClass(t.hideClass)}}function r(e,t){e.data("placeholder").addClass(t.hideClass)}function i(e,t){var n=t.is("textarea");var r=parseFloat(t.css("padding-top"));var i=parseFloat(t.css("padding-left"));var s=t.offset();if(r){s.top+=r}if(i){s.left+=i}e.css({width:t.innerWidth()-(n?20:4),height:t.innerHeight()-6,lineHeight:t.css("line-height"),whiteSpace:n?"normal":"nowrap",overflow:"hidden"}).offset(s)}function s(t,i){var o=t.val();var u=i;t.bind("keyup.placeHolder_polyfill",function(t){if(e(this).val()!==o){r(e(this),u);e(this).unbind("keyup.placeHolder_polyfill");e(this).bind("keyup.placeHolder_polyfill",function(t){if(e(this).val()===""){n(e(this),u);e(this).unbind("keyup.placeHolder_polyfill");s(e(this),u)}})}})}function o(e){e.unbind("keyup.placeHolder_polyfill")}function u(e){if(t&&window.console&&window.console.log){window.console.log(e)}}var t=false;e.fn.placeHolder=function(t){u("init placeHolder");var a=this;this.options=e.extend({className:"placeholder",visibleToScreenreaders:true,visibleToScreenreadersHideClass:"placeholder-hide-except-screenreader",visibleToNoneHideClass:"placeholder-hide",hideOnFocus:false,removeLabelClass:"visuallyhidden",hiddenOverrideClass:"visuallyhidden-with-placeholder",forceHiddenOverride:true,forceApply:false,autoInit:true},t);this.options.hideClass=this.options.visibleToScreenreaders?this.options.visibleToScreenreadersHideClass:this.options.visibleToNoneHideClass;if(typeof e.attrHooks!=="undefined"||typeof e.propHooks!=="undefined"){var f={get:function(t){if(t.nodeName.toLowerCase()==="input"||t.nodeName.toLowerCase()==="textarea"){if(e(t).data("placeholder")){return e(e(t).data("placeholder")).text()}else{return e(t)[0].placeholder}}else{return undefined}},set:function(t,n){return e(e(t).data("placeholder")).text(n)}};if(typeof e.attrHooks!=="undefined"){e.attrHooks.placeholder=f}if(typeof e.propHooks!=="undefined"){e.propHooks.placeholder=f}}if(typeof e.valHooks!=="undefined"){var l={get:function(e){return e.value},set:function(t,n){t.value=n;if(!e(t).data("placeholder")){return}if(n==""){e(t).triggerHandler("placeholderForceShow")}else{e(t).triggerHandler("placeholderForceHide")}}};e.valHooks.input=l;e.valHooks.textarea=l}e("form").bind("reset",function(t){e(this).find("input, textarea").each(function(){if(!e(this).data("placeholder")){return}e(this).triggerHandler("placeholderForceShow")})});return e(this).each(function(t){function m(){if(!a.options.hideOnFocus){s(f,a.options)}else{r(f,a.options)}}var f=e(this),l=f.attr("placeholder"),c=f.attr("id"),h,p,d,v;if(l===""||l===undefined){l=f[0].attributes["placeholder"].value}h=f.closest("label");f.removeAttr("placeholder");if(!h.length&&!c){u("the input element with the placeholder needs an id!");return}h=h.length?h:e('label[for="'+c+'"]').first();if(!h.length){u("the input element with the placeholder needs a label!");return}v=e(h).find(".placeholder");if(v.length){i(v,f);v.text(l);return f}if(h.hasClass(a.options.removeLabelClass)){h.removeClass(a.options.removeLabelClass).addClass(a.options.hiddenOverrideClass)}p=e("<span>").addClass(a.options.className).text(l).appendTo(h);d=p.width()>f.width();if(d){p.attr("title",l)}i(p,f);f.data("placeholder",p);p.data("input",f);p.click(function(){e(this).data("input").focus()});f.focusin(m);f.focusout(function(){n(e(this),a.options);if(!a.options.hideOnFocus){o(e(this))}});f.bind("placeholderForceHide",function(){e(this).data("placeholder").addClass(a.options.hideClass)});f.bind("placeholderForceShow",function(){e(this).data("placeholder").removeClass(a.options.hideClass)});n(f,a.options);e(document).bind("fontresize resize",function(){i(p,f)});if(e.event.special.resize){e("textarea").bind("resize",function(){i(p,f)})}else{e("textarea").css("resize","none")}if(f.is(":focus")){m()}})};e(function(){var t=window.placeHolderConfig||{};if(t.autoInit===false){u("placeholder:abort because autoInit is off");return}if(("placeholder"in e("<input>")[0]||"placeHolder"in e("<input>")[0])&&!t.forceApply){u("placeholder:abort because browser has native support");return}e("input[placeholder], textarea[placeholder]").placeHolder(t)})})(jQuery)